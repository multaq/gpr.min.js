function AntiblockTest(){this.isEnabled=!1,config.antiblocking&&(this.testDomainName=config.antiblocking.testDomainName,this.originalDomainName=config.antiblocking.originalDomainName,this.destinationDomainName=config.antiblocking.destinationDomainName,this.accountDomainName=config.antiblocking.accountDomainName,this.isEnabled=!0),this.isCloudfront=!1}function ToolSet(t){this.fullOsName=t,this.os="",this.init()}function SwitchBtnUpdater(t,e){this.eventTracker=t,this.os=e}function DownloadBtnUpdater(t,e,i){this.links=config.buttons.urls,this.eventTracker=t,this.cookieHandler=i,this.os=e}function EliteBtnUpdater(t){this.eventTracker=t}function AFCookie(){var t=location.hostname.split("."),e=t.length;this.baseDomain="."+t[e-2]+"."+t[e-1]}function CrossdomainController(t,e){this.isEnabled=!0,this.baseDomains=config.crossDomains,this.baseDomains.length||(this.isEnabled=!1),this.restrirectedClasses=["gpr-get-hss-switch-btn","js-get-hss-home-page","gpr__download-app-btn","gpr__get-app-btn"],this.currentBaseDomain=e,this.baseDomainRegex=new RegExp("^https://(.*?\\.?)([a-zA-Z0-9]+\\.[a-zA-Z0-9]{1,5})/"),this.visitorHashParam="vh="+t.hash}function AFRequestGetParams(t){if(this.params={},!t){if(!window.location.search)return;t=window.location.search}var e=t.substr(1).split("&");e&&e.length&&this.parseParams(e)}function AFIrParams(){this.clickid="",this.source="",this.isFromCookie=!1}function AFIrInitializer(t,e){this.requestGetParams=t,this.cookieHandler=e}function AFUserAgent(t){this.navigator=t,this.os="",this.osVersion="",this.browser="",this.browserFullVersion="",this.browserMajorVersion="",this.userAgent=t.userAgent,this.parse()}function AFUtms(t){this.prefix=t,this.source="",this.medium="",this.campaign="",this.term="",this.content="",this.isFromCookie=!1}function AFgclid(t){this.cookieHandler=t,this.cookieName="_afgclid",this.gclid=""}function AFUtmInitializer(t,e){this.requestGetParams=t,this.cookieHandler=e,this.fields=["medium","source","campaign","term","content"],this.serializedFieldNames={src:"source",mdm:"medium",cmpg:"campaign",trm:"term",cntnt:"content"}}function AFVisitorHash(t,e){this.hash=t,this.isNew=e}function AFVisitorHashInitializer(t,e){this.requestGetParams=t,this.cookieHandler=e,this.cookieName="hprchs_vstr_hsh",this.getParamName="vh"}function AFHasOffersInitializer(t,e){this.requestGetParams=t,this.cookieHandler=e,this.cookieName="_hocaf",this.cookieLifetime=100,this.params=["hotid","hoaid","hoan","hooid","hoas","hoaci"]}function gaTrack(t){this.eventTracker=t}function reportTracking(t,e,i,o){AFHSSTracker.isInitialized()&&AFHSSTracker.trackToGa.send(t,e,i,o)}var config={baseDownloadLink:"https://www.hotspotshield.com/vpn/",crossDomains:[".hotspotshield.com",".hsselite.com",".anchorfree.com"],baseReportingLink:"https://www.hotspotshield.com/gpr?data=",cloudReportingLink:"https://d2p1qyxxogka01.cloudfront.net/gpr?data=",specHomepageLogic:!0,specHomepageLogicUrl:"https://order.hotspotshield.com/",antiblocking:{testDomainName:"d2p1qyxxogka01.cloudfront.net",originalDomainName:"order.hotspotshield.com",destinationDomainName:"d3ap49fuaoqltu.cloudfront.net",accountDomainName:"d1bqg89p9tb8wl.cloudfront.net"},buttons:{urls:{default:"https://www.hotspotshield.com/vpn/",windows:"https://control.kochava.com/v1/cpi/click?campaign_id=kohotspot-shield-2oo5a11d43d86192b9&network_id=5798&device_id=device_id&site_id=1",windowsPaid:"https://control.kochava.com/v1/cpi/click?campaign_id=kohotspot-shield-2oo5ae676b888c4a81&network_id=5798&site_id=1&device_id=device_id",microsoft:"https://control.kochava.com/v1/cpi/click?campaign_id=kohotspot-shield-windows-store-na5iu8t7r48cee8d87873c&network_id=5798&site_id=1&device_id=device_id",winphone:"http://bit.ly/HotspotShield54",ios:"http://bit.ly/HotspotShield54",android:"http://bit.ly/HotspotShield54",mac:"http://bit.ly/HotspotShield54",chrome:"http://bit.ly/HotspotShield54"}},microsoftStoreTest:!1};AntiblockTest.prototype.init=function(){if(this.isEnabled){if(-1==window.location.href.indexOf(this.testDomainName))return-1!=window.location.href.indexOf(this.destinationDomainName)&&(this.isCloudfront=!0),void(-1!=window.location.href.indexOf(this.accountDomainName)&&(this.isCloudfront=!0));this.isCloudfront=!0;for(var t=document.querySelectorAll(".gpr__get-app-btn"),e=0;e<t.length;e++){var i=t[e];-1!=i.href.indexOf(this.originalDomainName)&&(i.href=i.href.replace(this.originalDomainName,this.destinationDomainName))}}},AntiblockTest.prototype.getIsCloudfront=function(){return this.isCloudfront},ToolSet.prototype.init=function(){var t={iOS:"ios","Mac OS X":"mac",Android:"android",Windows:"windows","Windows Phone":"winphone"};this.fullOsName in t?this.os=t[this.fullOsName]:this.os="default"},ToolSet.prototype.getCurrentOs=function(){return this.os},SwitchBtnUpdater.prototype.init=function(){this.initSwitchBtns()},SwitchBtnUpdater.prototype.initSwitchBtns=function(){for(var t=document.querySelectorAll(".gpr-get-hss-switch-btn"),e=0;e<t.length;e++){var i=t[e];if("windows"==this.os&&config.specHomepageLogic)if(i.classList.contains("js-get-hss-home-page"))i.classList.add("gpr__download-app-btn");else{i.classList.add("gpr__get-app-btn");var o=i.href,n=o.indexOf("?");i.href=config.specHomepageLogicUrl+(n>0?o.substring(n):"")}else i.classList.add("gpr__download-app-btn")}},DownloadBtnUpdater.prototype.init=function(){this.initDownloadUrls()},DownloadBtnUpdater.prototype.initDownloadUrls=function(){var t=document.querySelectorAll(".gpr__download-app-btn");if(t.length)for(var e=0;e<t.length;e++){var i=t[e];this.updateDownloadBtn(i)}},DownloadBtnUpdater.prototype.updateDownloadBtn=function(t){var e="default";"windows"==(e=t.classList.contains("gpr__download-app-btn__microsoft")?"microsoft":t.classList.contains("gpr__download-app-btn__mac")?"mac":t.classList.contains("gpr__download-app-btn__ios")?"ios":t.classList.contains("gpr__download-app-btn__android")?"android":t.classList.contains("gpr__download-app-btn__windows")?"windows":t.classList.contains("gpr__download-app-btn__chrome")?"chrome":this.os)&&(t.classList.contains("gpr__download-app-btn__windows-paid")?e="windowsPaid":config.microsoftStoreTest&&(t.classList.contains("gpr__download-app-btn__no-for-store")||(e=this.microsoftStoreTest(e)))),t.href=this.getDownloadUrl(e),t.href=this.autoLoginFeature(t),this.setOnClickHandler(t,e)},DownloadBtnUpdater.prototype.autoLoginFeature=function(t){var e=t.getAttribute("data-al-token"),i=t.href.indexOf("?")>0?"&":"?";return e?t.href+i+"al_token="+e:t.href},DownloadBtnUpdater.prototype.microsoftStoreTestUserStatus=null,DownloadBtnUpdater.prototype.microsoftStoreTest=function(t){if(/Windows NT 10/.test(window.navigator.userAgent)){if(null===this.microsoftStoreTestUserStatus&&(this.microsoftStoreTestUserStatus=this.cookieHandler.get("af642")),this.microsoftStoreTestUserStatus)"TEST"==this.microsoftStoreTestUserStatus&&(t="microsoft");else{var e=Math.random();this.microsoftStoreTestUserStatus=e<=1?"TEST":e<.5?"CONTROL":"OUT",this.cookieHandler.set("af642",this.microsoftStoreTestUserStatus),"TEST"==this.microsoftStoreTestUserStatus&&(t="microsoft"),"OUT"!=this.microsoftStoreTestUserStatus&&(this.eventTracker.sendEvent("AF642_win_store_testing",{action:"link_update",action_name:this.microsoftStoreTestUserStatus}),dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"A/B [af-642]",gaEventAction:this.microsoftStoreTestUserStatus,gaEventLabel:"",gaEventValue:"",gprEventLabel:"button_click"}))}}return t},DownloadBtnUpdater.prototype.getDownloadUrl=function(t){var e=!1;if("hssDownloadLinks"in window){var i=window.hssDownloadLinks;t in i&&(e=i[t])}if(!e&&"object"==typeof(e=this.links[t])){var o=[];for(var n in e)o.push([n,e[n]]);o.sort(function(t,e){return t[1]-e[1]});var r=this.cookieHandler.get("GPR-R");r||(r=Math.round(100*Math.random())),this.cookieHandler.set("GPR-R",r);for(var s in o)if(r<=parseInt(o[s][1])){e=o[s][0];break}}return"chrome"==t?e:("chrome"!=t&&(-1==e.indexOf("?")?e+="?":e+="&",e+=this.getDownloadTrackingParams(e),e+="&aftr_source="+encodeURIComponent(window.location.pathname)),e)},DownloadBtnUpdater.prototype.getDownloadTrackingParams=function(t){var e=this.eventTracker,i={vh:e.visitorHash.hash};document.referrer&&(i.referrer=document.referrer),e.irParams.source&&(i.source=e.irParams.source),e.irParams.clickid&&(i.clickid=e.irParams.clickid);var o=[e.defaultUtms,e.effectiveUtms,e.afUtms];for(var n in o){var r=o[n].toJSONObject();for(var s in r)r[s]&&(i[s]=r[s])}var a="aftr";return-1!=t.indexOf("adjust.com")&&(a="label"),a+"="+encodeURIComponent(JSON.stringify(i))},DownloadBtnUpdater.prototype.setOnClickHandler=function(t,e){var i=this,o=function(t){i.onClick(t,e)};t.addEventListener?t.addEventListener("click",o):t.attachEvent("onclick",o)},DownloadBtnUpdater.prototype.onClick=function(t,e){var i="windows"==e?"Downloading":"Redirecting",o={android:"Google play",ios:"App store",mac:"Mac app store",winphone:"Microsoft store",microsoft:"Microsoft store",windows:"Download .exe",windowsPaid:"Download paid.exe",chrome:"Chrome web store",default:"/vpn page"},n="";n=e in o?o[e]:"/vpn page",this.eventTracker.sendEvent("button_click",{action:i,action_name:n}),dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"Download btn",gaEventAction:i,gaEventLabel:n,gaEventValue:1,gprEventLabel:"button_click"})},EliteBtnUpdater.prototype.init=function(){this.initEliteUrls()},EliteBtnUpdater.prototype.initEliteUrls=function(){var t=document.querySelectorAll(".gpr__get-app-btn");if(t.length)for(var e=0;e<t.length;e++){var i=t[e];i.href+=this.getTrackingParams(i.href),this.setOnClickHandler(i)}},EliteBtnUpdater.prototype.setOnClickHandler=function(t){var e=this,i=function(t){e.onClickHandler(t)};t.addEventListener?t.addEventListener("click",i):t.attachEvent("onclick",i)},EliteBtnUpdater.prototype.onClickHandler=function(t){this.eventTracker.sendEvent("button_click",{action:"upgrade button",action_name:"redirect to order.hotspotshield.com"}),dataLayer.push({event:"gaTriggerEvent",gaEventCategory:"upgrade button",gaEventAction:"click",gaEventLabel:"",gaEventValue:1,gprEventLabel:"button_click"})},EliteBtnUpdater.prototype.getTrackingParams=function(t){var e=this.eventTracker,i=[];e.irParams.source&&i.push("source="+encodeURIComponent(e.irParams.source)),e.irParams.clickid&&i.push("clickid="+encodeURIComponent(e.irParams.clickid));var o=[];-1==t.indexOf("utm_source")&&o.push(e.defaultUtms),-1==t.indexOf("effect_source")&&o.push(e.effectiveUtms),-1==t.indexOf("af_source")&&o.push(e.afUtms);for(var n in o){var r=o[n].toJSONObject();for(var s in r)r[s]&&i.push(s+"="+encodeURIComponent(r[s]))}var a=i.join("&");return a=-1==t.indexOf("?")?"?"+a:"&"+a},AFCookie.prototype.set=function(t,e,i){void 0===i&&(i=30);var o=new Date;o.setTime(o.getTime()+86400*i*1e3);var n="expires="+o.toUTCString();document.cookie=t+"="+e+";"+n+"; domain="+this.baseDomain+"; path=/"},AFCookie.prototype.get=function(t){for(var e=t+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var n=i[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},CrossdomainController.prototype.init=function(t){this.defaultUtms=t.defaultUtms,this.effectiveUtms=t.effectiveUtms,this.afUtms=t.afUtms,this.irParams=t.irParams;for(var e=this.findUrls(),i=0;i<e.length;i++){var o=e[i];this.isCrossdomainUrl(o)&&this.setCrossdomainUrl(o)}},CrossdomainController.prototype.findUrls=function(){return document.getElementsByTagName("a")},CrossdomainController.prototype.isCrossdomainUrl=function(t){var e=t.href;if(0!==e.indexOf("https"))return!1;var i=this.extractBaseDomain(e);if(!i)return!1;if(i===this.currentBaseDomain)return!1;for(var o in this.restrirectedClasses)if(-1!==t.className.indexOf(this.restrirectedClasses[o]))return!1;if("indexOf"in this.baseDomains)return this.baseDomains.indexOf(i)>-1;for(var n=0;n<this.baseDomains.length;n++)if(i==this.baseDomains[n])return!0;return!1},CrossdomainController.prototype.extractBaseDomain=function(t){var e=t.match(this.baseDomainRegex);return!!e&&"."+e[2]},CrossdomainController.prototype.setCrossdomainUrl=function(t){var e=this.appendStrToUrl(this.visitorHashParam,t.href);e=this.appendUtmParams(e,this.defaultUtms),e=this.appendUtmParams(e,this.effectiveUtms),e=this.appendUtmParams(e,this.afUtms),e=this.appendIrParams(e,this.irParams),t.href=e},CrossdomainController.prototype.appendUtmParams=function(t,e){if(e.isEmpty())return t;var i=[e.prefix+"source=",e.prefix+"campaign="];for(var o in i){var n=i[o];if(-1!==t.indexOf(n))return t}var r=e.urlencode();return this.appendStrToUrl(r,t)},CrossdomainController.prototype.appendIrParams=function(t,e){if(e.isEmpty())return t;if(new AFRequestGetParams(t).get("click_id"))return t;var i=e.urlencode();return this.appendStrToUrl(i,t)},CrossdomainController.prototype.appendStrToUrl=function(t,e){return t?(-1===e.indexOf("?")?e+="?"+t:e+="&"+t,e):e},AFRequestGetParams.prototype.parseParams=function(t){for(var e in t){var i=t[e].split("="),o=i[0]&&decodeURIComponent(i[0]);this.params[o]=i[1]&&decodeURIComponent(i[1])}},AFRequestGetParams.prototype.get=function(t){return t in this.params&&this.params[t]},AFGPR={version:"1.2.1",defaultResendDelayMs:4500,xhrTimeoutMs:3500,isTimeoutSet:!1,isResubmitTimeoutSet:!1,failedAttemptsCount:0,maxFailAttempts:10,sender:{backendUrl:"",sendToBackend:function(t,e,i,o){var n=!1;try{n=navigator.sendBeacon(this.backendUrl,t)}catch(t){}if(!n){var r=new XMLHttpRequest;return"withCredentials"in r||"undefined"==XDomainRequest?r.onreadystatechange=function(){4==r.readyState&&e&&e.call(i,t,r.status)}:r=new XDomainRequest,r.open("GET",this.backendUrl+encodeURIComponent(t),o),o&&"timeout"in r&&(r.timeout=3500,r.ontimeout=function(){}),r.send(),r}}},init:function(t){this.sender.backendUrl=t?config.cloudReportingLink:config.baseReportingLink},sendEvent:function(t,e,i){void 0===i&&(i=!0);var o=new Date;e.gpr_version=this.version;var n=JSON.stringify({event:window.location.hostname+"_"+t,ts:o.getTime(),payload:e});this.sender.sendToBackend(n,this.onBackendResponseReceived,this,i)},onBackendResponseReceived:function(t,e){if(!e.toString().match(/^2[0-9]{2}$/)&&!this.isResubmitTimeoutSet){this.isResubmitTimeoutSet=!0;var i=this;setTimeout(function(){i.isResubmitTimeoutSet=!1,i.sender.sendToBackend(t,i.onBackendResponseReceived,i)},this.defaultResendDelayMs)}}},ErrorLogger={logError:function(t){if("undefined"!=typeof Raven)try{throw new Error(t)}catch(t){Raven.captureException(t)}},captureException:function(t){"undefined"!=typeof Raven&&Raven.captureException(t)}},AFHSSTracker={version:"0.1.1",visitorHash:!1,hasOffersTracker:!1,userAgent:!1,cookieHandler:!1,requestGetParams:!1,irParams:!1,defaultUtmPrefix:"utm_",effectiveUtmPrefix:"effect_",afUtmPrefix:"af_",defaultUtmCookie:"__tr_df_utm_gpr",effectiveUtmCookie:"__tr_ef_utm_gpr",afUtmCookie:"__tr_af_utm_gpr",defaultUtms:!1,effectiveUtms:!1,afUtms:!1,irCookieName:"__tr_ir_gpr",isInited:!1,baseDomain:!1,downloadBtnUpdater:!1,eliteBtnUpdater:!1,crossdomainController:!1,closeEventReported:!1,init:function(){this.host=window.location.hostname,this.initBaseDomain(),this.cookieHandler=new AFCookie,this.requestGetParams=new AFRequestGetParams,this.visitorHash=this.initVisitorHash(),this.userAgent=new AFUserAgent(window.navigator),this.irParams=this.initIRParams(),this.initUTMParams(),this.toolSet=new ToolSet(this.userAgent.getOs()),this.switchBtnUpdater=new SwitchBtnUpdater(this,this.toolSet.getCurrentOs()),this.switchBtnUpdater.init(),this.downloadBtnUpdater=new DownloadBtnUpdater(this,this.toolSet.getCurrentOs(),this.cookieHandler),this.eliteBtnUpdater=new EliteBtnUpdater(this),this.eliteBtnUpdater.init(),this.trackToGa=new gaTrack(this),this.trackToGa.init(),this.gclid=new AFgclid(this.cookieHandler),this.gclid.init(this.requestGetParams.get("gclid")),this.crossDomainController=new CrossdomainController(this.visitorHash,this.baseDomain),this.crossDomainController.isEnabled&&this.crossDomainController.init({defaultUtms:this.defaultUtms,effectiveUtms:this.effectiveUtms,afUtms:this.afUtms,irParams:this.irParams});var t=new AntiblockTest;t.init(),this.initGPR(t.getIsCloudfront()),this.hasOffersTracker=this.initHasOffersTracker(),this.initPageLeaveEvents(),this.sendInitDoneEvent(),this.isInited=!0},initPageLeaveEvents:function(){var t=this,e=function(e){t.reportClose(e.type)};window.addEventListener&&(window.addEventListener("beforeunload",e),window.addEventListener("unload",e),window.addEventListener("pagehide",e))},reportClose:function(t){this.closeEventReported||(this.closeEventReported=!0,this.sendEvent("page_leave",{action:t},!1))},isInitialized:function(){return this.isInited},initBaseDomain:function(){var t=location.hostname.split("."),e=t.length;this.baseDomain="."+t[e-2]+"."+t[e-1]},initVisitorHash:function(){return new AFVisitorHashInitializer(this.requestGetParams,this.cookieHandler).initHash()},initHasOffersTracker:function(){return new AFHasOffersInitializer(this.requestGetParams,this.cookieHandler).initTracker()},initIRParams:function(){return new AFIrInitializer(this.requestGetParams,this.cookieHandler).init(this.irCookieName)},initUTMParams:function(){var t=new AFUtmInitializer(this.requestGetParams,this.cookieHandler);this.defaultUtms=t.init(this.defaultUtmPrefix,this.defaultUtmCookie),this.afUtms=t.init(this.afUtmPrefix,this.afUtmCookie);var e=t.initFromCookies(this.effectiveUtmPrefix,this.effectiveUtmCookie);this.irParams.clickid&&!this.irParams.isFromCookie&&(e.copyFrom(this.defaultUtms),t.saveToCookie(this.effectiveUtmCookie,e)),!e.isEmpty()||this.defaultUtms.isEmpty()||this.defaultUtms.isFromCookie||(e.copyFrom(this.defaultUtms),t.saveToCookie(this.effectiveUtmCookie,e)),this.effectiveUtms=e},initGPR:function(t){AFGPR.init(t),this.gpr=AFGPR},sendEvent:function(t,e,i){void 0===i&&(i=!0),e.tracking_version=this.version,e.is_first_visit=this.visitorHash.isNew,e.host=this.host,e.visitor_hash=this.visitorHash.hash,e.uuid=uuidv1(),e.os=this.userAgent.getOs(),e.os_version=this.userAgent.getOsVersion(),e.browser=this.userAgent.getBrowser(),e.browser_full_version=this.userAgent.getBrowserFullVersion(),e.browser_major_version=this.userAgent.getBrowserMajorVersion(),e.source_href=window.location.href,e.user_agent=this.userAgent.userAgent,e.lang=navigator.userLanguage,e.country=this.cookieHandler.get("af_country"),e.utm_source=this.defaultUtms.source,e.utm_campaign=this.defaultUtms.campaign,e.utm_medium=this.defaultUtms.medium,e.utm_term=this.defaultUtms.term,e.utm_content=this.defaultUtms.content,e.effect_source=this.effectiveUtms.source,e.effect_campaign=this.effectiveUtms.campaign,e.effect_medium=this.effectiveUtms.medium,e.effect_term=this.effectiveUtms.term,e.effect_content=this.effectiveUtms.content,e.af_source=this.afUtms.source,e.af_campaign=this.afUtms.campaign,e.af_medium=this.afUtms.medium,e.af_term=this.afUtms.term,e.af_content=this.afUtms.content,e.ir_source=this.irParams.source,e.ir_clickid=this.irParams.clickid,e.http_referrer=document.referrer,e.gclid=this.gclid.gclid,this.gpr.sendEvent(t,e,i)},getDownloadBtnUpdater:function(){return this.downloadBtnUpdater},getEliteBtnUpdater:function(){return this.eliteBtnUpdater},sendInitDoneEvent:function(){var t=null;try{t=new Event("onAFHSSTrackerInitDone"),window.dispatchEvent(t)}catch(t){}}},AFIrParams.prototype.isEmpty=function(){return!this.clickid},AFIrParams.prototype.urlencode=function(){return this.clickid?"clickid="+this.clickid+"&source=ir":""},AFIrInitializer.prototype.init=function(t){var e=this.initFromGet();return e.isEmpty()?e=this.initFromCookie(t):(this.saveToCookie(t,e),e)},AFIrInitializer.prototype.initFromGet=function(){var t=this.requestGetParams.get("source")||"",e="";"ir"==t.toLowerCase()&&this.requestGetParams.get("clickid")&&(e=this.requestGetParams.get("clickid"));var i=new AFIrParams;return i.clickid=e,i.source=t,i},AFIrInitializer.prototype.initFromCookie=function(t){var e=new AFIrParams;e.isFromCookie=!0;var i=this.cookieHandler.get(t);if(!i)return e;try{var o=JSON.parse(i);if(!("clickid"in o))return e}catch(t){return ErrorLogger.logError(t.name+":"+t.message),e}var n=new AFIrParams;return n.clickid=o.clickid,n.source=o.source,n.isFromCookie=!0,n},AFIrInitializer.prototype.saveToCookie=function(t,e){var i=JSON.stringify({clickid:e.clickid,source:e.source});this.cookieHandler.set(t,i)},AFUserAgent.prototype.parse=function(){this.initOS(),this.initBrowser()},AFUserAgent.prototype.initOS=function(){var t=this.navigator.appVersion,e=this.navigator.userAgent,i="unknown",o=[{s:"Windows Phone",r:/Windows Phone/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];try{for(var n in o){var r=o[n];if(r.r.test(e)){i=r.s;break}}var s="unknown";switch(/Windows Phone/.test(i)?(s=/Windows Phone (.*)/.exec(i)[1],i="Windows Phone"):/Windows/.test(i)&&(s=/Windows (.*)/.exec(i)[1],i="Windows"),i){case"Mac OS X":s=/Mac OS X (10[\.\_\d]+)/.exec(e)[1];break;case"Android":s=/Android ([\.\_\d]+)/.exec(e)[1];break;case"iOS":s=(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+s[2]+"."+(0|s[3])}}catch(t){this.os="error",this.osVersion="error"}this.os=i,this.osVersion=s},AFUserAgent.prototype.initBrowser=function(){var t,e,i,o=this.navigator.userAgent,n=this.navigator.appName,r=""+parseFloat(this.navigator.appVersion);-1!=(e=o.indexOf("OPR/"))?(n="Opera",r=o.substring(e+4)):-1!=(e=o.indexOf("Opera"))?(n="Opera",r=o.substring(e+6),-1!=(e=o.indexOf("Version"))&&(r=o.substring(e+8))):-1!=(e=o.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=o.substring(e+5)):-1!=(e=o.indexOf("Chrome"))?(n="Chrome",r=o.substring(e+7)):-1!=(e=o.indexOf("Safari"))?(n="Safari",r=o.substring(e+7),-1!=(e=o.indexOf("Version"))&&(r=o.substring(e+8))):-1!=(e=o.indexOf("Firefox"))?(n="Firefox",r=o.substring(e+8)):(t=o.lastIndexOf(" ")+1)<(e=o.lastIndexOf("/"))&&(n=o.substring(t,e),r=o.substring(e+1),n.toLowerCase()==n.toUpperCase()&&(n=this.navigator.appName)),-1!=(i=r.indexOf(";"))&&(r=r.substring(0,i)),-1!=(i=r.indexOf(" "))&&(r=r.substring(0,i));var s=parseInt(""+r,10);isNaN(s)&&(r=""+parseFloat(this.navigator.appVersion),s=parseInt(this.navigator.appVersion,10)),this.browser=n,this.browserFullVersion=r,this.browserMajorVersion=s},AFUserAgent.prototype.getOs=function(){return this.os},AFUserAgent.prototype.getOsVersion=function(){return this.osVersion},AFUserAgent.prototype.getBrowser=function(){return this.browser},AFUserAgent.prototype.getBrowserFullVersion=function(){return this.browserFullVersion},AFUserAgent.prototype.getBrowserMajorVersion=function(){return this.browserMajorVersion},AFUtms.prototype.isEmpty=function(){return!(this.medium||this.source||this.campaign)},AFUtms.prototype.copyFrom=function(t){this.source=t.source,this.medium=t.medium,this.campaign=t.campaign,this.term=t.term,this.content=t.content},AFUtms.prototype.toJSONObject=function(){var t=["medium","source","campaign","term","content"],e={};for(var i in t)e[this.prefix+t[i]]=this[t[i]];return e},AFUtms.prototype.urlencode=function(){var t=[],e=["source","medium","campaign","terms","content"];for(var i in e){var o=e[i];this[o]&&t.push(this.prefix+o+"="+this[o])}return t.length>0?t.join("&"):""},AFgclid.prototype.init=function(t){this.gclid=this.cookieHandler.get(this.cookieName),this.gclid||(this.gclid=t,this.gclid&&this.set())},AFgclid.prototype.set=function(){this.cookieHandler.set(this.cookieName,this.gclid)},AFUtmInitializer.prototype.init=function(t,e){var i=this.initFromGet(t);return i.isEmpty()?this.initFromCookies(t,e):(this.saveToCookie(e,i),i)},AFUtmInitializer.prototype.initFromGet=function(t){var e=new AFUtms(t);for(var i in this.fields){var o=t+this.fields[i];e[this.fields[i]]=this.requestGetParams.get(o)||""}return e},AFUtmInitializer.prototype.initFromCookies=function(t,e){var i=this.cookieHandler.get(e),o=new AFUtms(t);if(o.isFromCookie=!0,!i)return o;try{var n=new AFUtms(t);n.isFromCookie=!0;var r=JSON.parse(i);for(var s in this.serializedFieldNames){var a=this.serializedFieldNames[s],c="";s in r&&(c=r[s]),n[a]=c}return n}catch(t){return ErrorLogger.logError(t.name+":"+t.message),o}},AFUtmInitializer.prototype.saveToCookie=function(t,e){var i={};for(var o in this.serializedFieldNames){var n=this.serializedFieldNames[o];i[o]=e[n]}var r=JSON.stringify(i);this.cookieHandler.set(t,r)},function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).uuidv1=t()}}(function(){return function t(e,i,o){function n(s,a){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return n(i||t)},h,h.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,e,i){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);e.exports=function(t,e){var i=e||0,n=o;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}},{}],2:[function(t,e,i){(function(t){var i,o=t.crypto||t.msCrypto;if(o&&o.getRandomValues){var n=new Uint8Array(16);i=function(){return o.getRandomValues(n),n}}if(!i){var r=new Array(16);i=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,i){var o=t("./lib/rng"),n=t("./lib/bytesToUuid"),r=o(),s=[1|r[0],r[1],r[2],r[3],r[4],r[5]],a=16383&(r[6]<<8|r[7]),c=0,d=0;e.exports=function(t,e,i){var o=e&&i||0,r=e||[],h=void 0!==(t=t||{}).clockseq?t.clockseq:a,l=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:d+1,f=l-c+(u-d)/1e4;if(f<0&&void 0===t.clockseq&&(h=h+1&16383),(f<0||l>c)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=l,d=u,a=h;var p=(1e4*(268435455&(l+=122192928e5))+u)%4294967296;r[o++]=p>>>24&255,r[o++]=p>>>16&255,r[o++]=p>>>8&255,r[o++]=255&p;var m=l/4294967296*1e4&268435455;r[o++]=m>>>8&255,r[o++]=255&m,r[o++]=m>>>24&15|16,r[o++]=m>>>16&255,r[o++]=h>>>8|128,r[o++]=255&h;for(var g=t.node||s,v=0;v<6;++v)r[o+v]=g[v];return e||n(r)}},{"./lib/bytesToUuid":1,"./lib/rng":2}]},{},[3])(3)}),AFVisitorHash.prototype.isEmpty=function(){return""==this.hash},AFVisitorHashInitializer.prototype.initHash=function(){var t=this.initFromGet();return t.isEmpty()?(t=this.initFromCookie()).isEmpty()?(t=this.initNew(),this.saveToCookie(t),t):t:(this.saveToCookie(t),t)},AFVisitorHashInitializer.prototype.initFromCookie=function(){return new AFVisitorHash(this.cookieHandler.get(this.cookieName),!1)},AFVisitorHashInitializer.prototype.initFromGet=function(){return new AFVisitorHash(this.requestGetParams.get(this.getParamName)||"",!1)},AFVisitorHashInitializer.prototype.saveToCookie=function(t){this.cookieHandler.set(this.cookieName,t.hash)},AFVisitorHashInitializer.prototype.initNew=function(){return new AFVisitorHash("ext"+uuidv1(),!0)},AFHasOffersInitializer.prototype.saveToCookie=function(t){this.cookieHandler.set(this.cookieName,t,this.cookieLifetime)},AFHasOffersInitializer.prototype.initTracker=function(){var t={},e=this;for(i=0;i<this.params.length;i++){var o=e.requestGetParams.get(this.params[i]);o&&(t[this.params[i]]=o)}return 0!==Object.keys(t).length&&(void 0!==t.hotid&&(void 0!==t.hooid&&(AFHSSTracker.sendEvent("hasoffers_landing",{action:"landing"}),this.saveToCookie(JSON.stringify(t)),!0)))},gaTrack.prototype.init=function(){window.dataLayer=window.dataLayer||[];var t=document.getElementsByClassName("ga_track_it");if(t.length)for(var e=0;e<t.length;e++)t[e].addEventListener("click",function(t){AFHSSTracker.trackToGa.onClick(t)})},gaTrack.prototype.onClick=function(t){var e=t||window.event,i=e.target;if(i){var o=this.getReportingOject(i);o&&this.send(o.c?o.c:"",o.a?o.a:"",o.l?o.l:"",o.v?o.v:"",o.gprl?o.gprl:"");var n=i.getAttribute("href");n&&(e.preventDefault(),i.getAttribute("target")?window.open(n,"_blank").focus():setTimeout(function(){window.location.href=n},300))}},gaTrack.prototype.getReportingOject=function(t){var e=t.getAttribute("data-tracking-param");e.indexOf("{'")+1&&(e=e.replace(/'/g,'"'));try{e=JSON.parse(e)}catch(t){Raven.isSetup()&&Raven.captureMessage("Broken GA reporting object: "+encodeURI(e),{level:"error"}),e=!1}return e||!1},gaTrack.prototype.send=function(t,e,i,o,n,r){dataLayer.push({event:"gaTriggerEvent",gaEventCategory:t||"",gaEventAction:e||"",gaEventLabel:i||"",gaEventValue:o||"",gprEventLabel:n||"ga_event"}),r||this.eventTracker.sendEvent("button_click",{action:e,action_name:i})},AFHSSTracker.isInitialized()||window.addEventListener("DOMContentLoaded",function(){try{AFHSSTracker.init(),AFHSSTracker.sendEvent("page_view",{action:window.location.href}),AFHSSTracker.downloadBtnUpdater.init()}catch(t){ErrorLogger.logError("Gpr init failure: "+t.message)}});
